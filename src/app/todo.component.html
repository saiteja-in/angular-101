<div class="todo-container">
  <header class="todo-header">
    <h1>üìù Todo List</h1>
    <p class="subtitle">Manage your tasks efficiently</p>
  </header>

  <!-- Add Todo Form -->
  <form (ngSubmit)="addTodo()" class="add-form">
    <input
      [(ngModel)]="newTodoText"
      name="todoText"
      placeholder="What needs to be done?"
      class="todo-input"
      (keyup.enter)="addTodo()"
    />
    <button type="submit" [disabled]="!newTodoText.trim()" class="add-button">
      Add Todo
    </button>
  </form>

  <!-- Filter Buttons -->
  <div class="filter-buttons">
    @for (filter of filterTypes; track filter) {
      <button
        [class.active]="todoService.filterSignal() === filter"
        (click)="setFilter(filter)"
        class="filter-btn"
      >
        {{ filter === 'all' ? 'All' : filter === 'active' ? 'Active' : 'Completed' }}
      </button>
    }
  </div>

  <!-- Todo List -->
  <div class="todo-list">
    @if (todoService.filteredTodos().length === 0) {
      <div class="empty-state">
        <p>No todos found.</p>
        <small>Add a todo above to get started!</small>
      </div>
    } @else {
      @for (todo of todoService.filteredTodos(); track todo.id) {
        <div class="todo-item"
             [class.completed]="todo.completed">
          <input
            type="checkbox"
            [checked]="todo.completed"
            (change)="toggleTodo(todo.id)"
            class="todo-checkbox"
          />
          <span class="todo-text">{{ todo.text }}</span>
          <button
            (click)="removeTodo(todo.id)"
            class="delete-btn"
            title="Delete todo"
          >
            ‚úï
          </button>
        </div>
      }
    }
  </div>

  <!-- Statistics and Actions -->
  <div class="footer">
    <div class="stats">
      <span>Total: <strong>{{ stats().total }}</strong></span>
      <span>Active: <strong>{{ stats().active }}</strong></span>
      <span>Completed: <strong>{{ stats().completed }}</strong></span>
    </div>

    @if (stats().completed > 0) {
      <button (click)="clearCompleted()" class="clear-btn">
        Clear Completed
      </button>
    }

    @if (stats().total > 0) {
      <div class="toggle-all">
        <button
          (click)="toggleAll()"
          class="toggle-all-btn"
        >
          {{ allCompleted() ? 'Uncheck All' : 'Check All' }}
        </button>
      </div>
    }
  </div>
</div>

